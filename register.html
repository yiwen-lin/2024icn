<!-- Header Link -->
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Register | ICN Merger Workshop</title>
    <link rel="icon" href="assets/img/faveicon.png" type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/plugin.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="register-page">


<!-- Header Section -->
<!-- Header Start Here -->
<header class="header-area header-general">
    <div class="container">
        <div class="header-wrapper header-general-wrapper">
            <div class="logo">
                <a href="index.html">
                    <img src="assets/img/logo/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-wrap ">
                <!-- Menu Start -->
                <div class="main-menu ">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="agenda.html">Agenda</a></li>
                        <li><a href="venue.html">Venue</a></li>
                        <li><a href="accommodation.html">Accommodation</a></li>
                        <li><a href="events.html">Social Events</a></li>
                        <li><a href="highlight.html">Highlights</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="login.html"><i class="icofont-user-alt-6"></i></a></li>
                    </ul>
                </div>
                <!-- Menu Start -->
                <div class="header-right">
                    <div class="book-ticket header-account">
                        <a class="btn btn-lg-space btn-bg-g-secondary" href="register.html">Register</a>
                    </div>
                    <div class="hamburger">
                        <div class="plates">
                            <!--  onclick="this.classList.toggle('active')" -->
                            <div class="plate plate5">
                                <svg class="burger" version="1.1" height="100" width="100" viewBox="0 0 100 100">
                                    <path class="line line1" d="M 30,35 H 70 " />
                                    <path class="line line2" d="M 50,50 H 30 L 34,32" />
                                    <path class="line line3" d="M 50,50 H 70 L 66,68" />
                                    <path class="line line4" d="M 30,65 H 70 " />
                                </svg>
                                <svg class="x" version="1.1" height="100" width="100" viewBox="0 0 100 100">
                                    <path class="line" d="M 34,32 L 66,68" />
                                    <path class="line" d="M 66,32 L 34,68" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Header End Here -->

<section class="login-area register-area s-pb-100">
    <div class="container-fluid">
        <div class="login-wrapper">

            <!-- <div class="login-thumb">
                <img src="assets/img/thumb/register-thumb.png" alt="sign-up">
            </div> -->
            <form method="post" id="register" class="login-form">
                <div class="from-title">
                    <h1 data-aos="fade-up" data-aos-delay="10"><span>ICN</span> Merger Workshop</h1>
                    <p>November 13-15, 2024 – Regent Taipei Hotel, Taipei</p>
                    <p>Registration will be open until October 31, 2024.</p>
                    <p>Registration is open for 2 officials and 1 NGA from each ICN member agency. If your agency plans to request for additional registrations, please indicate so below.</p>
                    <br>
                    <p>If you have previously filled out the registration application, please log in to view the information.</p>
                    <h6 data-aos="fade-up" data-aos-delay="100">It is necessary to fill in boxes marked with an asterisk_(*)</h6>
                </div>
                <div class="login-input">
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>First Name *</label>
                        <div class="from-box">
                            <input name="first_name" class="form-control required" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Surname Name *</label>
                        <div class="from-box">
                            <input name="surname_name" class="form-control required" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Pronoun *​</label>
                        <div class="from-box">
                            <select class="form-control form-select required" name="pronoun">
                                <option selected disabled value=""></option>
                                <option value="male">He/Him</option>
                                <option value="female">She/her</option>
                                <option value="other">They/them​</option>
                            </select>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Jurisdiction​ *​​</label>
                        <div class="from-box">
                            <select class="form-control form-select required" name="country">
                                <option selected disabled value="">​</option>
                                <optgroup label="Oceania">
                                    <option value="Australia">Australia</option>
                                    <option value="Autorite Polynesienne de la">Autorite Polynésienne de la</option>
                                    <option value="Fijian">Fijian</option>
                                    <option value="New Caledonia">New Caledonia</option>
                                    <option value="New Zealand">New Zealand</option>
                                    <option value="Papua New Guinea">Papua New Guinea</option>
                                </optgroup>

                                <optgroup label="North-America">
                                    <option value="Barbados">Barbados</option>
                                    <option value="Canada">Canada</option>
                                    <option value="Costa Rica">Costa Rica</option>
                                    <option value="Dominican Republic">Dominican Republic</option>
                                    <option value="Honduran">Honduran</option>
                                    <option value="Jamaica">Jamaica</option>
                                    <option value="Mexico">Mexico</option>
                                    <option value="Nicaragua">Nicaragua</option>
                                    <option value="Panama">Panamá</option>
                                    <option value="Salvador">Salvador</option>
                                    <option value="Trinidad and Tobago">Trinidad and Tobago</option>
                                    <option value="US">U.S.</option>
                                </optgroup>

                                <optgroup label="South-America">
                                    <option value="Argentina">Argentina</option>
                                    <option value="Brazil">Brazil</option>
                                    <option value="CARICOM">CARICOM(Caribbean Community)</option>
                                    <option value="Chile">Chile</option>
                                    <option value="Colombia">Colombia</option>
                                    <option value="Curacao">Curaçao</option>
                                    <option value="Ecuador">Ecuador</option>
                                    <option value="Guyana">Guyana</option>
                                    <option value="Paraguay">Paraguay</option>
                                    <option value="Uruguay">Uruguay</option>
                                    <option value="Venezuelan">Venezuelan</option>
                                </optgroup>

                                <optgroup label="Africa">
                                    <option value="Algeria">Algeria</option>
                                    <option value="Angolan">Angolan</option>
                                    <option value="Botswana">Botswana</option>
                                    <option value="Egyptian">Egyptian</option>
                                    <option value="Eswatini">Eswatini</option>
                                    <option value="Ethiopian">Ethiopian</option>
                                    <option value="Gambia">Gambia</option>
                                    <option value="Kenya">Kenya</option>
                                    <option value="Malawi">Malawi</option>
                                    <option value="Maroc">Maroc</option>
                                    <option value="Mauritius">Mauritius</option>
                                    <option value="Namibian">Namibian</option>
                                    <option value="Nigeria">Nigeria</option>
                                    <option value="Senegal">Senegal</option>
                                    <option value="Seychelles">Seychelles</option>
                                    <option value="South Africa">South Africa</option>
                                    <option value="South African">South African</option>
                                    <option value="Tunisia">Tunisia</option>
                                    <option value="United Republic of Tanzania">United Republic of Tanzania</option>
                                    <option value="Zambia">Zambia</option>
                                    <option value="Zimbabwe">Zimbabwe</option>
                                </optgroup>

                                <optgroup label="Asia">
                                    <option value="Bangladesh">Bangladesh</option>
                                    <option value="Hong Kong">Hong Kong</option>
                                    <option value="India">India</option>
                                    <option value="Indonesia">Indonesia</option>
                                    <option value="Israel">Israel</option>
                                    <option value="Japan">Japan</option>
                                    <option value="Jordan">Jordan</option>
                                    <option value="Kazakhstan">Kazakhstan</option>
                                    <option value="Korea">Korea</option>
                                    <option value="Kuwait">Kuwait</option>
                                    <option value="Kyrgyz Republic">Kyrgyz Republic</option>
                                    <option value="Malaysia">Malaysia</option>
                                    <option value="Mongolia">Mongolia</option>
                                    <option value="Oman">Oman</option>
                                    <option value="Pakistan">Pakistan</option>
                                    <option value="Philippine">Philippine</option>
                                    <option value="Qatar">Qatar</option>
                                    <option value="Republic of Armenia">Republic of Armenia</option>
                                    <option value="Republic of Uzbekistan">Republic of Uzbekistan</option>
                                    <option value="Saudi Arabia">Saudi Arabia</option>
                                    <option value="Singapore">Singapore</option>
                                    <option value="Sri Lanka">Sri Lanka</option>
                                    <option value="Taiwan">Taiwan</option>
                                    <option value="Tajikistan">Tajikistan</option>
                                    <option value="Thailand">Thailand</option>
                                    <option value="Viet Nam">Viet Nam</option>
                                    <option value="Yemen">Yemen</option>
                                </optgroup>

                                <optgroup label="Europe">
                                    <option value="Albania">Albania</option>
                                    <option value="Austria">Austria</option>
                                    <option value="Belarus">Belarus</option>
                                    <option value="Belgian">Belgian</option>
                                    <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
                                    <option value="Bulgaria">Bulgaria</option>
                                    <option value="Croatia">Croatia</option>
                                    <option value="Cyprus">Cyprus</option>
                                    <option value="Czech Republic">Czech Republic</option>
                                    <option value="Denmark">Denmark</option>
                                    <option value="Estonia">Estonia</option>
                                    <option value="European Union">European Union</option>
                                    <option value="Faeroe Islands">Faeroe Islands</option>
                                    <option value="Finland">Finland</option>
                                    <option value="France">France</option>
                                    <option value="Georgia">Georgia</option>
                                    <option value="Germany">Germany</option>
                                    <option value="Greenland">Greenland</option>
                                    <option value="Guernsey">Guernsey</option>
                                    <option value="Hungary">Hungary</option>
                                    <option value="Iceland">Iceland</option>
                                    <option value="Ireland">Ireland</option>
                                    <option value="Italy">Italy</option>
                                    <option value="Jersey">Jersey</option>
                                    <option value="Latvia">Latvia</option>
									<option value="Lithuania">Lithuania</option>
                                    <option value="Luxembourg">Luxembourg</option>
                                    <option value="Malta">Malta</option>
                                    <option value="Montenegro">Montenegro</option>
                                    <option value="Netherland">Netherland</option>
                                    <option value="North Macedonia">North Macedonia</option>
                                    <option value="Norway">Norway</option>
                                    <option value="Poland">Poland</option>
                                    <option value="Portugal">Portugal</option>
                                    <option value="Republic of Azerbaijan">Republic of Azerbaijan</option>
                                    <option value="Republic of Kosovo">Republic of Kosovo</option>
                                    <option value="Republic of Lithuania">Republic of Lithuania</option>
                                    <option value="Republic of Moldova">Republic of Moldova</option>
                                    <option value="Republic of Serbia">Republic of Serbia</option>
                                    <option value="Romania">Romania</option>
                                    <option value="Russia">Russia</option>
                                    <option value="Slovak Republic">Slovak Republic</option>
                                    <option value="Slovenia">Slovenia</option>
                                    <option value="Spain">Spain</option>
                                    <option value="Sweden">Sweden</option>
                                    <option value="Switzerland">Switzerland</option>
                                    <option value="Turkey">Turkey</option>
                                    <option value="Ukraine">Ukraine</option>
                                    <option value="United Kingdom">United Kingdom</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Type of Participant​ *​</label>
                        <div class="from-box">
                            <select id="select_participant" class="form-control form-select required" name="participant_type">
                                <option selected disabled value="">​</option>
                                <option value="participant_nca" disabled>NCA (National Competition Authorities)</option>
                                <option value="participant_nga" disabled>NGA (Non Governmental Advisors)</option>
                                <option value="additional_registration" disabled>need additional registration</option>
                            </select>
                        </div>
                    </div>
                    <div id="nca_name_ipt" class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>If NGA, name of authority and person that invited you.​ *</label>
                        <div class="from-box">
                            <input name="nca_name" class="required" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Agency / Firm Name *​​</label>
                        <div class="from-box">
                            <input name="agency" class="form-control required" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Job Title / Position​ *​​</label>
                        <div class="from-box">
                            <input name="job_title" class="form-control required" type="text" placeholder="">
                        </div>
                    </div>
                    <!-- <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Address​​ *​​</label>
                        <div class="from-box">
                            <input name="address" class="form-control required" type="text" placeholder="">
                            <i class="icofont-location-pin"></i>
                        </div>
                    </div> -->
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>E-Mail *​​</label>
                        <div class="from-box">
                            <input name="email" class="form-control required" type="text" placeholder="">
                            <i class="icofont-ui-email"></i>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Password *​​</label>
                        <div class="from-box">
                            <input name="password" class="form-control required" type="text" placeholder="">
                            <i class="icofont-key"></i>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Confirm Password *​​</label>
                        <div class="from-box">
                            <input name="confirm_password" class="form-control required" type="text" placeholder="">
                        </div>
                    </div>
                    <!-- <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Work Phone *​​</label>
                        <div class="from-box">
                            <input name="work_phone" class="form-control required" type="text" placeholder="">
                            <i class="icofont-phone"></i>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Mobile Phone​</label>
                        <div class="from-box">
                            <input name="mobile_phone" type="text" placeholder="">
                            <i class="icofont-iphone"></i>
                        </div>
                    </div> -->
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Please enroll the welcome reception (11/12  18:00-21:00) *​</label>
                        <div class="from-box">
                            <select class="form-control form-select required" name="welcome_reception">
                                <option selected disabled value="">​</option>
                                <option value="1">YES​</option>
                                <option value="0">NO​</option>
                            </select>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Do you need a letter of invitation for visa purpose?(Please note these letters will be sent separately from your confirmation email)  *<a href="https://www.boca.gov.tw/cp-149-4486-7785a-2.html" target="_blank">Visa-Exempt Entry</a>​</label>
                        <div class="from-box">
                            <select class="form-control form-select required" name="invitation_letter">
                                <option selected disabled value="">​</option>
                                <option value="1">YES​</option>
                                <option value="0">NO​</option>
                            </select>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Please select the social events that you will attend (optional) 11/15  14:30-18:00​​</label>
                        <div class="from-box">
                            <select class="form-select" name="social_events">
                                <option selected disabled value="">​</option>
                                <option value="social_01">Taipei 101 (Observatory and Shopping)​</option>
                                <option value="social_02">National Palace Museum (A cultural and artistic tour)​</option>
                                <option value="social_03">Dadaocheng (A guided walking tour of traditional merchant streets.)​</option>
                                <option value="social_04">Not Participate​</option>
                            </select>
                        </div>
                    </div>
                    <div class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>Special Services:The TFTC will make every attempt to accommodate special needs. Please indicate any dietary or special needs.​</label>
                        <div class="from-box">
                            <select id="select_diet" class="form-control form-select required" name="special_services">
                                <option selected disabled value="">​</option>
                                <option value="vegetarian">Vegetarian</option>
                                <option value="noneed">No need</option>
                                <option value="other">Others:</option>
                            </select>
                        </div>
                    </div>
                    <div id="other_diet_ipt" class="single-form mb-20" data-aos="fade-up" data-aos-delay="200">
                        <label>If other, answer here.​ *</label>
                        <div class="from-box">
                            <input name="special_services_others" class="required" type="text" placeholder="">
                        </div>
                    </div>
                    <input type="submit" class="btn btn-lg-space" data-aos="fade-up" data-aos-delay="600" value="Submit">
                </div>
                <!-- <div class="login-footer" data-aos="fade-up" data-aos-delay="700">
                    <p>Already have account? <a href="login.html">Login</a></p>
                </div> -->
            </form>
        </div>
    </div>
</section>


<!-- Footer Area Start Here -->
<footer class="primary-footer-area py-70 py-md-40 bg-dark secondary-footer">
    <div class="container">
        <div class="footer-items">
            <div class="footer-contact">
                <h4 class="footer-title">Contact Us</h4>
                <a href="mailto:info.2024icn.merger@ftc.gov.tw"><i class="icofont-ui-message"></i>info.2024icn.merger@ftc.gov.tw</a>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Area End Here -->
<!-- Copy Right Start Here -->
<div class="copyright">
    <p>Copyright © 2024 FAIR TRADE COMMISSION. All rights reserved.​</p>
</div>
<!-- Copy Right End Here -->
<!-- Footer Area End Here -->
<!-- Footer script-->

<!-- Jquery call here-->
<script src="assets/js/app.min.js"></script>
<!-- custom script call here -->
<script src="assets/js/scripts.js"></script>
<script>
    const REGISTER_API_URL = 'https://epass.icn2024merger.tw/api/register';
    const GET_TOUR_QUOTA_API_URL = 'https://epass.icn2024merger.tw/api/get-tour-quota';
    const GET_COUNTRY_QUOTA_API_URL = 'https://epass.icn2024merger.tw/api/get-country-quota';
    const BEARER_TOKEN = 'KU3mDVHXaLiVt2kjfGT0k69OoJf3CWH9z3zbugzlbcc0e25b';

    $(function () {
        getTourQuota();

        $('#select_participant').on('change', function () {
            let selectVal = $(this).find(":selected").val();
            checkParticipantType(selectVal);
        });

        $('#select_diet').on('change', function () {
            let selectVal = $(this).find(":selected").val();
            checkDietType(selectVal);
        });

        $('[name="country"]').on('change', event => {
            checkParticipantType();
            const target = $(event.target);

            if (target.length === 0) {
                return;
            }

            getCountryQuota();
        });

        let form = document.getElementById('register');

        form.addEventListener('submit', function (e) {
            e.preventDefault();

            let checkValid = validateInputs();

            if (checkValid) {
                const form = e.target;
                const formData = new FormData(form);

                const data = {};

                formData.forEach((value, key) => {
                    if (['confirm_password'].indexOf(key) === -1) {
                        data[key] = value;
                    }
                });

                form.querySelectorAll(`[name]`).forEach((inputElement) => {
                    inputElement.parentNode.classList.remove("error");
                });

                fetch(REGISTER_API_URL, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${BEARER_TOKEN}`
                    },
                    body: JSON.stringify(data)
                }).then((response) => {
                    if (response.ok === true) {
                        return response.json();
                    } else if (response.status === 422) {
                        return response.json().then(errorData => {
                            let errorMessages = [];

                            // Validate
                            if ("errors" in errorData) {
                                for (const [field, errors] of Object.entries(errorData.errors)) {
                                    errors.forEach(error => {
                                        errorMessages.push(error);
                                        form.querySelector(`[name="${field}"]`).parentNode.classList.add("error");

                                        console.error(`${field}: ${error}`);
                                    });
                                }
                            }

                            // Participants: Out of quota.
                            if ("message" in errorData) {
                                const error = errorData.message;
                                const outOfQuotaRegex = /^Out of quota for country\/.* participants\.$/;

                                if (outOfQuotaRegex.test(error)) {
                                    getCountryQuota();
                                    errorMessages.push(error);
                                    form.querySelector(`[name="participant_type"]`).parentNode.classList.add("error");

                                    console.error(`participant_type: ${error}`);
                                }
                            }

                            alert(errorMessages.join('\n'));

                            focusValidateInput();

                            throw new Error('Validation failed');
                        });
                    } else {
                        return response.text().then(text => {
                            throw new Error(response.statusText + ": " + text);
                        });
                    }
                }).then((responseData) => {
                    alert(responseData.message);
                    console.log('Success', responseData);
                }).catch(() => {
                    console.log('Fetch error');
                }).finally(() => {
                });
            } else {
                alert('You have required fields that are not filled out. Please complete them before submitting.')
            }
        });
        function validateInputs() {
            var inputs = form.querySelectorAll('.form-control');
            var valid = [];
            var radioCheck = false;
            var checkboxCheck = false;
            inputs.forEach(function (i, j) {
                var checkAttr = i.tagName;
                if(i.getAttribute('type')){
                    checkAttr = i.getAttribute('type');
                }

                switch(checkAttr){
                    case 'text':
                        var _thisVal = i.value;
                        if (_thisVal === '') {
                            i.parentNode.classList.add("error");
                            valid.push(i.getAttribute('name'));
                        }else{
                            i.parentNode.classList.remove("error");
                        }
                        break;
                    case 'select':
                        if (i[select.selectedIndex].value === '') {
                            i.parentNode.classList.add("error");
                            valid.push(i.getAttribute('name'));
                        } else {
                            i.parentNode.classList.remove("error");
                        }
                        break;
                    default:
                        if (i.value === '') {
                            i.parentNode.classList.add("error");
                            valid.push(i.getAttribute('name'));
                        } else {
                            i.parentNode.classList.remove("error");
                        }
                        break;
                }
            });

            let password = form.querySelector('[name="password"]');
            let confirmPassword = form.querySelector('[name="confirm_password"]');

            if (password.value !== confirmPassword.value) {
                password.parentNode.classList.add("error");
                confirmPassword.parentNode.classList.add("error");
                valid.push(password.getAttribute('name'));
                valid.push(confirmPassword.getAttribute('name'));
            } else {
                password.parentNode.classList.remove("error");
                confirmPassword.parentNode.classList.remove("error");
            }

            if (valid.length > 0) {
                focusValidateInput();

                return false;
            } else {
                return true;
            }
        }

        function focusValidateInput() {
            const targetTop = form.querySelector(`.error`).parentNode.offsetTop;
            const header = document.querySelector(`header`).offsetHeight;
            const scrollTop = targetTop - header - 200;
            window.scrollTo({
                top: scrollTop > 0 ? scrollTop : 0,
                behavior: "smooth",
            });
        }

        function checkParticipantType(selectVal = '') {
            $('#nca_name_ipt').find('input').val('');
            if (selectVal === 'participant_nga') {
                $('#nca_name_ipt').show();
                $('#nca_name_ipt').find('input').addClass('form-control');
            } else {
                $('#nca_name_ipt').hide();
                $('#nca_name_ipt').find('input').removeClass('form-control');
            }
        }

        function checkDietType(selectVal) {
            $('#other_diet_ipt').find('input').val('');
            if (selectVal === 'other') {
                $('#other_diet_ipt').show();
                $('#other_diet_ipt').find('input').addClass('form-control');
            } else {
                $('#other_diet_ipt').hide();
                $('#other_diet_ipt').find('input').removeClass('form-control');
            }
        }

        function getCountryQuota() {
            const target = $('[name="participant_type"]');
            target.val('');
            target.find(`option`).attr('disabled', true);

            const selectCountryValue = $('[name="country"]').val();
            if (selectCountryValue === '') {
                target.find('option').forEach((element) => {
                    element.attr('disabled', true);
                });

                return;
            }

            let data = {
                country: selectCountryValue
            };

            fetch(GET_COUNTRY_QUOTA_API_URL, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${BEARER_TOKEN}`
                },
                body: JSON.stringify(data)
            }).then((response) => {
                if (response.ok === true) {
                    return response.json();
                } else {
                    return response.text().then(text => {
                        throw new Error(response.statusText + ": " + text);
                    });
                }
            }).then((responseData) => {
                let isOpenAdditionalRegistration = false;

                for (const [value, status] of Object.entries(responseData)) {
                    if (status === false) {
                        isOpenAdditionalRegistration = true;
                        let targetOption = target.find(`option[value="${value}"]`);
                        targetOption.attr('disabled', true);
                    } else if (status === true) {
                        let targetOption = target.find(`option[value="${value}"]`);
                        targetOption.removeAttr('disabled');
                    }
                }

                if (isOpenAdditionalRegistration === true) {
                    target.find(`option[value="additional_registration"]`).removeAttr('disabled');
                } else {
                    target.find(`option[value="additional_registration"]`).attr('disabled', true);
                }
                console.log('Get Country Quota Success');
            }).catch(() => {
                console.log('Fetch error');
            }).finally(() => {
            });
        }

        function getTourQuota() {
            const target = $('[name="social_events"]');
            if (target.length === 0) {
                return;
            }

            fetch(GET_TOUR_QUOTA_API_URL, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${BEARER_TOKEN}`
                },
            }).then((response) => {
                if (response.ok === true) {
                    return response.json();
                } else {
                    return response.text().then(text => {
                        throw new Error(response.statusText + ": " + text);
                    });
                }
            }).then((responseData) => {
                target.val('');
                for (const [value, status] of Object.entries(responseData)) {
                    if (status === false) {
                        let targetOption = target.find(`option[value="${value}"]`);
                        targetOption.attr('disabled', true);
                    }
                }

                console.log('Get Tour Quota Success');
            }).catch(() => {
                console.log('Fetch error:');
            }).finally(() => {
            });
        }


    });
</script>
</body>
</html>
